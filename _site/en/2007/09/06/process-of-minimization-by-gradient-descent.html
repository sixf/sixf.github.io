<p>This demo was written by me about three months ago when I was illustrating the algorithm of <a href="http://en.wikipedia.org/wiki/Gradient_descent">Gradient Descent</a> in the class of "Data Mining &amp; Machine Learning". I like to combine iterations (or loopings) with animated pictures, because it's simple and heuristic, and of course, it's easy in R: just use <code>Sys.sleep()</code> to control the time of steps of your demonstration and some low-level graphics functions such as <code>lines()</code>, <code>points()</code>, <code>rect()</code>, <code>polygon()</code> and <code>segments()</code>, etc to illustrate the process of your algorithm. To understand the figure below, you need to be clear about what's <code>contour plot</code>.</p>

<p><img src="http://i.imgur.com/C8jlQ.png" alt="Process of Minimization by Gradient Descent (2D)" /></p>

<p>Below is the code for the above example, and it has been included in the <a href="http://cran.r-project.org/package=animation"><strong>animation</strong></a> package as the <code>grad.desc()</code> function:</p>

<div class="highlight"><pre><code class="r">op <span class="o">=</span> par<span class="p">(</span>pty <span class="o">=</span> <span class="s">&quot;s&quot;</span><span class="p">,</span> mar <span class="o">=</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> cex.axis <span class="o">=</span> <span class="m">0.75</span><span class="p">,</span> cex.main <span class="o">=</span> <span class="m">0.85</span><span class="p">)</span>
x2 <span class="o">=</span> x1 <span class="o">=</span> seq<span class="p">(</span><span class="m">-2</span> <span class="o">*</span> pi<span class="p">,</span> <span class="m">2</span> <span class="o">*</span> pi<span class="p">,</span> <span class="m">0.1</span><span class="p">)</span>
f <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">,</span> y<span class="p">)</span> x<span class="o">^</span><span class="m">2</span> <span class="o">+</span> <span class="m">3</span> <span class="o">*</span> sin<span class="p">(</span>y<span class="p">)</span>
contour<span class="p">(</span>x1<span class="p">,</span> x2<span class="p">,</span> outer<span class="p">(</span>x1<span class="p">,</span> x2<span class="p">,</span> f<span class="p">),</span> col <span class="o">=</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> main <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
mtext<span class="p">(</span>side <span class="o">=</span> <span class="m">3</span><span class="p">,</span> expression<span class="p">(</span>z <span class="o">==</span> x<span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="o">^</span><span class="m">2</span> <span class="o">+</span> <span class="m">3</span> <span class="o">*</span> sin<span class="p">(</span>x<span class="p">[</span><span class="m">2</span><span class="p">])))</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">)</span> <span class="p">{</span>
  x <span class="o">=</span> unlist<span class="p">(</span>locator<span class="p">(</span><span class="m">1</span><span class="p">))</span>
  s <span class="o">=</span> <span class="m">0.05</span>
  newx <span class="o">=</span> x <span class="o">-</span> s <span class="o">*</span> c<span class="p">(</span><span class="m">2</span> <span class="o">*</span> x<span class="p">[</span><span class="m">1</span><span class="p">],</span> <span class="m">3</span> <span class="o">*</span> cos<span class="p">(</span>x<span class="p">[</span><span class="m">2</span><span class="p">]))</span>
  eps <span class="o">=</span> <span class="m">0.001</span>
  gap <span class="o">=</span> abs<span class="p">(</span>f<span class="p">(</span>newx<span class="p">[</span><span class="m">1</span><span class="p">],</span> newx<span class="p">[</span><span class="m">2</span><span class="p">])</span> <span class="o">-</span> f<span class="p">(</span>x<span class="p">[</span><span class="m">1</span><span class="p">],</span> x<span class="p">[</span><span class="m">2</span><span class="p">]))</span>
  <span class="kr">while</span> <span class="p">(</span>gap <span class="o">&gt;</span> eps<span class="p">)</span> <span class="p">{</span>
    arrows<span class="p">(</span>x<span class="p">[</span><span class="m">1</span><span class="p">],</span> x<span class="p">[</span><span class="m">2</span><span class="p">],</span> newx<span class="p">[</span><span class="m">1</span><span class="p">],</span> newx<span class="p">[</span><span class="m">2</span><span class="p">],</span> length <span class="o">=</span> <span class="m">0.075</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;blue&quot;</span><span class="p">)</span>
    x <span class="o">=</span> newx
    newx <span class="o">=</span> x <span class="o">-</span> s <span class="o">*</span> c<span class="p">(</span><span class="m">2</span> <span class="o">*</span> x<span class="p">[</span><span class="m">1</span><span class="p">],</span> <span class="m">3</span> <span class="o">*</span> cos<span class="p">(</span>x<span class="p">[</span><span class="m">2</span><span class="p">]))</span>
    gap <span class="o">=</span> abs<span class="p">(</span>f<span class="p">(</span>newx<span class="p">[</span><span class="m">1</span><span class="p">],</span> newx<span class="p">[</span><span class="m">2</span><span class="p">])</span> <span class="o">-</span> f<span class="p">(</span>x<span class="p">[</span><span class="m">1</span><span class="p">],</span> x<span class="p">[</span><span class="m">2</span><span class="p">]))</span>
    Sys.sleep<span class="p">(</span>gap<span class="o">/</span><span class="m">3</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
par<span class="p">(</span>op<span class="p">)</span>
</code></pre></div>



