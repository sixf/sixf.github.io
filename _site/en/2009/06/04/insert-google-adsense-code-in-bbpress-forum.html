<p>Currently I haven't found a good plugin to insert Google Adsense code into the bbPress forum (for the <code>plugin adsense-for-bbpress</code>, I don't like the idea of posting Adsense code as if it were a post), so I opened the template file <code>post.php</code> and manually inserted the code as:</p>

<div class="highlight"><pre><code class="php"><span class="x">&lt;div class=&quot;threadpost&quot;&gt;</span>
<span class="x">    &lt;div class=&quot;post&quot;&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$bb_alt</span><span class="p">[</span><span class="s1">&#39;post&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="nb">is_int</span><span class="p">(</span><span class="nv">$bb_alt</span><span class="p">[</span><span class="s1">&#39;post&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;span style=&quot;float:right;padding-left:1em;&quot;&gt;</span>
<span class="x">        &lt;script type=&quot;text/javascript&quot;&gt;&lt;!--</span>
<span class="x">        google_ad_client = &quot;pub-2679974521646557&quot;;</span>
<span class="x">        /* 200x200 @ EN */</span>
<span class="x">        google_ad_slot = &quot;0041982581&quot;;</span>
<span class="x">        google_ad_width = 200;</span>
<span class="x">        google_ad_height = 200;</span>
<span class="x">        //--&gt;</span>
<span class="x">        &lt;/script&gt;</span>
<span class="x">        &lt;script type=&quot;text/javascript&quot;</span>
<span class="x">        src=&quot;http://pagead2.googlesyndication.com/pagead/show_ads.js&quot;&gt;</span>
<span class="x">        &lt;/script&gt;&lt;/span&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="p">}</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="nx">post_text</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class=&quot;poststuff&quot;&gt;</span><span class="cp">&lt;?php</span> <span class="nb">printf</span><span class="p">(</span> <span class="nx">__</span><span class="p">(</span><span class="s1">&#39;Posted %s ago&#39;</span><span class="p">),</span> <span class="nx">bb_get_post_time</span><span class="p">()</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;a href=&quot;</span><span class="cp">&lt;?php</span> <span class="nx">post_anchor_link</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;#&lt;/a&gt; </span><span class="cp">&lt;?php</span> <span class="nx">post_ip_link</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="nx">post_edit_link</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"> </span><span class="cp">&lt;?php</span> <span class="nx">post_delete_link</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>
</code></pre></div>


<p>The variable <code>$bb_alt['post']</code> has recorded the order of a post as 1, 2, ..., n. My code above makes sure that the adsense code will appear</p>

<ol>
<li>in the top post with probability 100%; (guaranteed by <code>$bb_alt['post'] == '0'</code>)</li>
<li>randomly in those posts of even-order (<code>is_int($bb_alt['post']/2)</code>) with probability 1/21â‰ˆ5% (<code>rand(0, 20) == 10</code>), but this probability depends on the RNG in PHP;</li>
</ol>


<p>To a statistician, everything is random :-)</p>
