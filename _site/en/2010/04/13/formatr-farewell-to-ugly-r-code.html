<p>It is not uncommon to see messy R code which is almost not human-readable
like this:</p>

<div class="highlight"><pre><code class="r"> <span class="c1"># rotation of the word &quot;Animation&quot;</span>
<span class="c1"># in a loop; change the angle and color</span>
<span class="c1"># step by step</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">360</span><span class="p">)</span> <span class="p">{</span>
 <span class="c1"># redraw the plot again and again</span>
plot<span class="p">(</span><span class="m">1</span><span class="p">,</span>ann<span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span>type<span class="o">=</span><span class="s">&quot;n&quot;</span><span class="p">,</span>axes<span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
<span class="c1"># rotate; use rainbow() colors</span>
text<span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="s">&quot;Animation&quot;</span><span class="p">,</span>srt<span class="o">=</span>i<span class="p">,</span>col<span class="o">=</span>rainbow<span class="p">(</span><span class="m">360</span><span class="p">)[</span>i<span class="p">],</span>cex<span class="o">=</span><span class="m">7</span><span class="o">*</span>i<span class="o">/</span><span class="m">360</span><span class="p">)</span>
<span class="c1"># pause for a while</span>
Sys.sleep<span class="p">(</span><span class="m">0.01</span><span class="p">)}</span>
</code></pre></div>


<p>Apparently it is pain reading unformatted R code, but on the other hand, it
is natural for us to be lazy. I don't care about adding spaces or indent to
my raw R code -- I'll concentrate on programming first and format my code
later. The R package <a href="http://cran.r-project.org/package=formatR"><strong>formatR</strong></a>
is intended to help us format our messy R code.</p>

<div class="highlight"><pre><code class="r"><span class="c1"># formatR optionally depends on gWidgetsRGtk2</span>
<span class="c1"># please use the latest version of R (&gt;=2.12.0)</span>
install.packages<span class="p">(</span><span class="s">&#39;formatR&#39;</span><span class="p">)</span>
library<span class="p">(</span>formatR<span class="p">)</span>
tidy.gui<span class="p">()</span>

<span class="c1">## you will get an error if the package gWidgetsRGtk2 is not installed;</span>
<span class="c1">## then you need to install it</span>
install.packages<span class="p">(</span><span class="s">&#39;gWidgetsRGtk2&#39;</span><span class="p">)</span>
tidy.gui<span class="p">(</span><span class="s">&#39;RGtk2&#39;</span><span class="p">)</span>
</code></pre></div>


<p>Then you can either paste your code into the text box or click the "Open"
button to open an existing R code file. Click the "Convert" button and you
are done!</p>

<p><img src="http://i.imgur.com/Y55lL.png" alt="formatR: unformatted R code" /></p>

<p><img src="http://i.imgur.com/v141t.png" alt="formatR: tidy R code" /></p>

<p><img src="http://i.imgur.com/dEhS2.png" alt="formatR: the Java GUI" /></p>

<p>There are several options in the "Preferences" panel, e.g. you can specify
whether to keep comments or blank lines, or specify the width of the
formatted R code.</p>

<p>No matter how messy your code looks like, <strong>formatR</strong> can make it tidy and
structured as long as there are no syntax errors in your R code. If you
prefer the command line interface, you may want to take a look at the
function <code>tidy.source()</code> in this package.</p>

<p>Note that multi-byte characters (say, Chinese) are also supported in the GUI.</p>
