<p>Here are some (trivial) R tips in the course Stat 511. I'll update this post till the semester is over.</p>

<h2>Formatting R Code</h2>

<p>Reading code is pain, but the well-formatted code might alleviate the pain a little bit. The function <code>tidy.source()</code> in the <strong>formatR</strong> package can help us format our R code automatically. By default it will read your code in the clipboard, parse it and return the well-formatted code. You have options to keep or remove the comments/blank lines and set the width of the code, etc. Spaces and indent will be added automatically. This can save us time typing spaces and paying attention to indent.</p>

<div class="highlight"><pre><code class="r"><span class="c1">## install.packages(&#39;formatR&#39;) if it is not installed yet</span>
library<span class="p">(</span>formatR<span class="p">)</span>
<span class="c1">## copy some R code somewhere and type:</span>
tidy.source<span class="p">()</span>
<span class="c1">## or specify the path of your code file</span>
tidy.source<span class="p">(</span>system.file<span class="p">(</span><span class="s">&quot;demo&quot;</span><span class="p">,</span> <span class="s">&quot;image.R&quot;</span><span class="p">,</span> package <span class="o">=</span> <span class="s">&quot;graphics&quot;</span><span class="p">))</span>
<span class="c1">## can also use a URL</span>
tidy.source<span class="p">(</span><span class="s">&#39;http://www.public.iastate.edu/~dnett/S511/twofactor.R&#39;</span><span class="p">)</span>
<span class="c1">## remove blank lines</span>
tidy.source<span class="p">(</span><span class="s">&#39;http://www.public.iastate.edu/~dnett/S511/twofactor.R&#39;</span><span class="p">,</span>
           keep.blank.line <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
<span class="c1">## remove comments</span>
tidy.source<span class="p">(</span><span class="s">&#39;http://www.public.iastate.edu/~dnett/S511/twofactor.R&#39;</span><span class="p">,</span>
           keep.comment <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</code></pre></div>


<h2>Approximating Rationals by Fractions</h2>

<p>We often deal with matrices like <code>C(X'X)^{-1}X'</code> in 511 and may wonder what on earth they are. If we directly compute <code>solve(t(X) %*% X) %*% t(X)</code> (or generalized inverse <code>ginv()</code> in <strong>MASS</strong>) we often end up with seeing a lot of decimals, which makes it difficult to see what these numbers really mean. The function <code>fractions()</code> in the <strong>MASS</strong> package can approximate rationals by fractions. For example:</p>

<div class="highlight"><pre><code class="r"><span class="c1">## from the movie rating example</span>
X <span class="o">=</span> matrix<span class="p">(</span>c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
    <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span>
    <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
    <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> byrow <span class="o">=</span> <span class="k-Variable">T</span><span class="p">,</span> nrow <span class="o">=</span> <span class="m">7</span><span class="p">)</span>
XX <span class="o">=</span> t<span class="p">(</span>X<span class="p">)</span> <span class="o">%*%</span> X
library<span class="p">(</span>MASS<span class="p">)</span>
XXgi <span class="o">=</span> ginv<span class="p">(</span>XX<span class="p">)</span>
C <span class="o">=</span> matrix<span class="p">(</span>c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
    <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
    <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
    <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
    <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span>
    <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> byrow <span class="o">=</span> <span class="k-Variable">T</span><span class="p">,</span> nrow <span class="o">=</span> <span class="m">12</span><span class="p">)</span>
<span class="c1">## what does C(X&#39;X)^{-}X&#39; mean?</span>
<span class="c1">#   hard to see</span>
C <span class="o">%*%</span> XXgi <span class="o">%*%</span> t<span class="p">(</span>X<span class="p">)</span>
<span class="c1">#               [,1]          [,2]          [,3]          [,4]</span>
<span class="c1"># [1,]  7.500000e-01  2.500000e-01  2.220446e-16  5.551115e-17</span>
<span class="c1"># [2,]  2.500000e-01  7.500000e-01  1.387779e-16  5.551115e-17</span>
<span class="c1"># [3,]  2.500000e-01  7.500000e-01 -1.000000e+00  1.000000e+00</span>
<span class="c1"># [4,]  5.000000e-01 -5.000000e-01  1.000000e+00  0.000000e+00</span>
<span class="c1"># [5,] -1.665335e-16 -5.551115e-17  1.000000e+00 -2.220446e-16</span>
<span class="c1"># [6,]  3.330669e-16  1.110223e-16  1.110223e-16  1.000000e+00</span>
<span class="c1"># [7,]  5.000000e-01 -5.000000e-01  1.000000e+00 -1.000000e+00</span>
<span class="c1"># [8,] -5.551115e-16 -3.330669e-16  1.000000e+00 -1.000000e+00</span>
<span class="c1"># [9,] -5.551115e-17 -2.220446e-16 -1.665335e-16  1.110223e-16</span>
<span class="c1">#[10,]  2.500000e-01 -2.500000e-01 -1.110223e-16  3.053113e-16</span>
<span class="c1">#[11,] -2.500000e-01  2.500000e-01 -2.220446e-16  2.775558e-16</span>
<span class="c1">#[12,] -2.500000e-01  2.500000e-01 -1.000000e+00  1.000000e+00</span>
<span class="c1">#               [,5]          [,6]          [,7]</span>
<span class="c1"># [1,]  2.775558e-17  2.500000e-01 -2.500000e-01</span>
<span class="c1"># [2,] -1.665335e-16 -2.500000e-01  2.500000e-01</span>
<span class="c1"># [3,] -4.440892e-16 -2.500000e-01  2.500000e-01</span>
<span class="c1"># [4,]  4.440892e-16  5.000000e-01 -5.000000e-01</span>
<span class="c1"># [5,]  2.220446e-16  0.000000e+00  1.110223e-16</span>
<span class="c1"># [6,]  1.110223e-16  0.000000e+00 -2.220446e-16</span>
<span class="c1"># [7,]  1.000000e+00  5.000000e-01 -5.000000e-01</span>
<span class="c1"># [8,]  1.000000e+00  2.220446e-16  4.440892e-16</span>
<span class="c1"># [9,]  1.000000e+00  2.775558e-16  1.110223e-16</span>
<span class="c1">#[10,] -5.551115e-17  7.500000e-01  2.500000e-01</span>
<span class="c1">#[11,] -2.220446e-16  2.500000e-01  7.500000e-01</span>
<span class="c1">#[12,] -6.661338e-16  2.500000e-01  7.500000e-01</span>

<span class="c1">#   much easier using fractions</span>
fractions<span class="p">(</span>C <span class="o">%*%</span> XXgi <span class="o">%*%</span> t<span class="p">(</span>X<span class="p">))</span>
<span class="c1">#      [,1] [,2] [,3] [,4] [,5] [,6] [,7]</span>
<span class="c1"># [1,]  3/4  1/4    0    0    0  1/4 -1/4</span>
<span class="c1"># [2,]  1/4  3/4    0    0    0 -1/4  1/4</span>
<span class="c1"># [3,]  1/4  3/4   -1    1    0 -1/4  1/4</span>
<span class="c1"># [4,]  1/2 -1/2    1    0    0  1/2 -1/2</span>
<span class="c1"># [5,]    0    0    1    0    0    0    0</span>
<span class="c1"># [6,]    0    0    0    1    0    0    0</span>
<span class="c1"># [7,]  1/2 -1/2    1   -1    1  1/2 -1/2</span>
<span class="c1"># [8,]    0    0    1   -1    1    0    0</span>
<span class="c1"># [9,]    0    0    0    0    1    0    0</span>
<span class="c1">#[10,]  1/4 -1/4    0    0    0  3/4  1/4</span>
<span class="c1">#[11,] -1/4  1/4    0    0    0  1/4  3/4</span>
<span class="c1">#[12,] -1/4  1/4   -1    1    0  1/4  3/4</span>
</code></pre></div>


<h2>Jittered Strip Chart</h2>

<p>Strip chart is a common tool for batch comparisons. When points get overlapped in the plot, we may "jitter" the points by adding a little noise to the data. The R function <code>jitter()</code> is an option to manipulate the data, but <code>stripchart()</code> already supports jittered points.</p>

<div class="highlight"><pre><code class="r"><span class="c1">## some people do not realize that the &#39;colClasses&#39; argument in</span>
<span class="c1">#      read.table() is quite useful -- can avoid explicit conversion</span>
d <span class="o">=</span> read.table<span class="p">(</span><span class="s">&quot;http://dnett.public.iastate.edu/S511/SeedlingDryWeight2.txt&quot;</span><span class="p">,</span>
    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> colClasses <span class="o">=</span> c<span class="p">(</span><span class="s">&quot;factor&quot;</span><span class="p">,</span> <span class="s">&quot;factor&quot;</span><span class="p">,</span> <span class="s">&quot;factor&quot;</span><span class="p">,</span>
        <span class="s">&quot;numeric&quot;</span><span class="p">))</span>
<span class="c1">## R base graphics: method = &#39;jitter&#39; will do</span>
stripchart<span class="p">(</span>SeedlingWeight <span class="o">~</span> Tray<span class="p">,</span> data <span class="o">=</span> d<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;jitter&quot;</span><span class="p">,</span>
    pch <span class="o">=</span> <span class="m">20</span><span class="p">,</span> panel.first <span class="o">=</span> grid<span class="p">())</span>
<span class="c1">## or the ggplot2 version: geom = &#39;jitter&#39;</span>
library<span class="p">(</span>ggplot2<span class="p">)</span>
qplot<span class="p">(</span>Tray<span class="p">,</span> SeedlingWeight<span class="p">,</span> data <span class="o">=</span> d<span class="p">,</span> colour <span class="o">=</span> Genotype<span class="p">,</span> geom <span class="o">=</span> <span class="s">&quot;jitter&quot;</span><span class="p">)</span>
</code></pre></div>


<p><img src="http://i.imgur.com/7vqwE.png" alt="Jittered Strip Chart by stripchart()" /></p>

<p><img src="http://i.imgur.com/1Rv8t.png" alt="Jittered Strip Chart by ggplot2" /></p>

<h2>Testing <code>C beta = d</code> in a Linear Model</h2>

<p>R base does not provide a general test for the coefficients of a linear model, but we can use the function <code>glh.test()</code> in the <strong>gmodels</strong> package to do it. If you take a look at its source code, you will find unsurprisingly it is nothing but the code in page 7 of slide set 9 of Dr Nettleton's lecture notes.</p>

<div class="highlight"><pre><code class="r">library<span class="p">(</span>gmodels<span class="p">)</span>
time <span class="o">=</span> factor<span class="p">(</span>rep<span class="p">(</span>c<span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">6</span><span class="p">),</span> each <span class="o">=</span> <span class="m">5</span><span class="p">))</span>
temp <span class="o">=</span> factor<span class="p">(</span>rep<span class="p">(</span>c<span class="p">(</span><span class="m">20</span><span class="p">,</span> <span class="m">30</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="m">30</span><span class="p">),</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">)))</span>
y <span class="o">=</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">12</span><span class="p">,</span> <span class="m">15</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">16</span><span class="p">)</span>
d <span class="o">=</span> data.frame<span class="p">(</span>time<span class="p">,</span> temp<span class="p">,</span> y<span class="p">)</span>
o <span class="o">=</span> lm<span class="p">(</span>y <span class="o">~</span> time <span class="o">+</span> temp <span class="o">+</span> time<span class="o">:</span>temp<span class="p">,</span> data <span class="o">=</span> d<span class="p">)</span>

<span class="c1">## compare with page 7-11 in slide set 9</span>

Ctime <span class="o">=</span> matrix<span class="p">(</span>c<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.5</span><span class="p">),</span> nrow <span class="o">=</span> <span class="m">1</span><span class="p">,</span> byrow <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
glh.test<span class="p">(</span>o<span class="p">,</span> Ctime<span class="p">)</span>

<span class="c1">#           Test of General Linear Hypothesis</span>
<span class="c1">#  Call:</span>
<span class="c1">#  glh.test(reg = o, cm = Ctime)</span>
<span class="c1">#  F = 6.0051, df1 = 1, df2 = 6, p-value = 0.04975</span>

Ctemp <span class="o">=</span> matrix<span class="p">(</span>c<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0.5</span><span class="p">),</span> nrow <span class="o">=</span> <span class="m">1</span><span class="p">,</span> byrow <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
glh.test<span class="p">(</span>o<span class="p">,</span> Ctemp<span class="p">)</span>

<span class="c1">#           Test of General Linear Hypothesis</span>
<span class="c1">#  Call:</span>
<span class="c1">#  glh.test(reg = o, cm = Ctemp)</span>
<span class="c1">#  F = 39.7072, df1 = 1, df2 = 6, p-value = 0.0007447</span>

Ctimetempint <span class="o">=</span> matrix<span class="p">(</span>c<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> nrow <span class="o">=</span> <span class="m">1</span><span class="p">,</span> byrow <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
glh.test<span class="p">(</span>o<span class="p">,</span> Ctimetempint<span class="p">)</span>

<span class="c1">#           Test of General Linear Hypothesis</span>
<span class="c1">#  Call:</span>
<span class="c1">#  glh.test(reg = o, cm = Ctimetempint)</span>
<span class="c1">#  F = 0.1226, df1 = 1, df2 = 6, p-value = 0.7382</span>

Coverall <span class="o">=</span> matrix<span class="p">(</span>c<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span>
 <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> nrow <span class="o">=</span> <span class="m">3</span><span class="p">,</span> byrow <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
glh.test<span class="p">(</span>o<span class="p">,</span> Coverall<span class="p">)</span>

<span class="c1">#           Test of General Linear Hypothesis</span>
<span class="c1">#  Call:</span>
<span class="c1">#  glh.test(reg = o, cm = Coverall)</span>
<span class="c1">#  F = 13.5319, df1 = 3, df2 = 6, p-value = 0.004439</span>
</code></pre></div>


<h2>Demo for the F Distribution</h2>

<p>I created a dynamic demo to illustrate the power of the F test here: <a href="/en/2010/04/demonstrating-the-power-of-f-test-with-gwidgets/">Demonstrating the Power of F Test with gWidgets</a>. Play with it and have fun!</p>

<h2>Tricks in <code>read.table()</code></h2>

<p>Many people do not realize the possibility of converting the data types of columns in <code>read.table()</code> and always use such specific <em>post hoc</em> conversion:</p>

<div class="highlight"><pre><code class="r">soup <span class="o">=</span> read.table<span class="p">(</span><span class="s">&quot;http://www.public.iastate.edu/~dnett/S511/soup.txt&quot;</span><span class="p">,</span>
    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
soup<span class="o">$</span>taster <span class="o">=</span> factor<span class="p">(</span>soup<span class="o">$</span>taster<span class="p">)</span>
soup<span class="o">$</span>batch <span class="o">=</span> factor<span class="p">(</span>soup<span class="o">$</span>batch<span class="p">)</span>
soup<span class="o">$</span>recipe <span class="o">=</span> factor<span class="p">(</span>soup<span class="o">$</span>recipe<span class="p">)</span>
soup<span class="o">$</span>tasteorder <span class="o">=</span> factor<span class="p">(</span>soup<span class="o">$</span>tasteorder<span class="p">)</span>
</code></pre></div>


<p>But in fact, we can specify the types of columns while reading data:</p>

<div class="highlight"><pre><code class="r"><span class="c1">## we know the first 4 are factors and the last one is numeric:</span>
soup <span class="o">=</span> read.table<span class="p">(</span><span class="s">&quot;http://www.public.iastate.edu/~dnett/S511/soup.txt&quot;</span><span class="p">,</span>
    <span class="kc">TRUE</span><span class="p">,</span> colClasses <span class="o">=</span> c<span class="p">(</span>rep<span class="p">(</span><span class="s">&quot;factor&quot;</span><span class="p">,</span> <span class="m">4</span><span class="p">),</span> <span class="s">&quot;numeric&quot;</span><span class="p">))</span>
<span class="c1">## conversion already done!</span>
str<span class="p">(</span>soup<span class="p">)</span>
<span class="c1"># &#39;data.frame&#39;:   72 obs. of  5 variables:</span>
<span class="c1">#  $ recipe    : Factor w/ 4 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;: 1 1 1 1 1 1 2 2 2 2 ...</span>
<span class="c1">#  $ batch     : Factor w/ 12 levels &quot;1&quot;,&quot;10&quot;,&quot;11&quot;,..: 1 1 1 1 1 1 5 5 5 5 ...</span>
<span class="c1">#  $ taster    : Factor w/ 24 levels &quot;1&quot;,&quot;10&quot;,&quot;11&quot;,..: 1 12 18 19 20 21 1 12 18 19 ...</span>
<span class="c1">#  $ tasteorder: Factor w/ 3 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;: 1 1 2 2 3 3 2 3 1 3 ...</span>
<span class="c1">#  $ y         : num  3 5 6 4 4 3 6 9 6 7 ...</span>
</code></pre></div>


<p>There are other tips in <code>read.table()</code> but I find this one the most useful. Check the 22 arguments in <code>?read.table</code> if you want to know more magic (e.g. how to specify the first column in the data file as the row names).</p>

<h2>Demo for Newton's Method</h2>

<p>There is a function <code>newton.method()</code> in the package animation which shows the detailed iterations in Newton's method. Here is a demo:</p>

<div class="highlight"><pre><code class="r">library<span class="p">(</span>animation<span class="p">)</span>
par<span class="p">(</span>pch <span class="o">=</span> <span class="m">20</span><span class="p">)</span>
ani.options<span class="p">(</span>nmax <span class="o">=</span> <span class="m">50</span><span class="p">)</span>
newton.method<span class="p">(</span><span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="m">5</span> <span class="o">*</span> x<span class="o">^</span><span class="m">3</span> <span class="o">-</span> <span class="m">7</span> <span class="o">*</span> x<span class="o">^</span><span class="m">2</span> <span class="o">-</span> <span class="m">40</span> <span class="o">*</span>
    x <span class="o">+</span> <span class="m">100</span><span class="p">,</span> <span class="m">7.15</span><span class="p">,</span> c<span class="p">(</span><span class="m">-6.2</span><span class="p">,</span> <span class="m">7.1</span><span class="p">))</span>
</code></pre></div>


<p><img src="http://i.imgur.com/Xj25I.gif" alt="Newton-Raphson Method for Root-finding" /></p>

<p>I hope this is useful for understanding iterative algorithms.</p>

<h2>Misc Tips</h2>

<p>Some little tips:</p>

<ol>
<li><code>unname()</code>: to remove the names of objects
     x = c(a = 1, b = 2)
     x
     # a b
     # 1 2
     unname(x)  ## x = unname(x) if one wants to replace x
     # [1] 1 2</li>
</ol>

