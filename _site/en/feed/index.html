<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
        xmlns:content="http://purl.org/rss/1.0/modules/content/"
        xmlns:atom="http://www.w3.org/2005/Atom"
  >
  <channel>
    <title></title>
    <atom:link href="/feed/" rel="self" type="application/rss+xml" />
    <link>http://yihui.name</link>
    <lastBuildDate>2014-02-10T22:34:34+08:00</lastBuildDate>
    <webMaster>xie@yihui.name</webMaster>
    
    <item>
      <title>黄粱五载梦</title>
      <link>/cn/2014/01/01/five-years.html</link>
      <pubDate>2014-01-01T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/cn/2014/01/01/five-years</guid>
      <content:encoded><![CDATA[<p><a href="http://zhiqiang.org">志强</a>兄说大家的2013年年度总结其实就是“2013你不知道的我的那些牛逼”，有理。本小子这里的博客记录还显示是2012年，转眼2014已经来了，不是我没写，而是我经常写志强兄说的东西，其实也只是自己小得意一下而已，无意专门显摆给各位客官，后来发现这样不好（世界如此暴躁，我却如此曼妙，这样不好，不好），干脆先冷却一年，待人走茶凉，我再登场。跪求客官们扶稳坐好，不要烧香不要拜，只是些写着玩的小玩意，若有缘看看，看完一呵而过就好。</p>

<p>2013年11月份，我跟RStudio老板说，我得休三个星期假，好去写个毕业论文毕个业，老板准奏。于是我把三篇文章（animation/cranvas/knitr）集合起来毕了个业，多亏导师大人们和委员会慈悲为怀，知道我已无意搞学术，就放了我一马。答辩时导师大人显得很紧张，见我还有闲心在答辩前先吃批萨，说算你狠（到底是谁要答辩啊），死猪不怕开水烫啊。无论如何，总算解决了人生三大问题：<strong>你怎么还没毕业？</strong>（老爹无数次问）<strong>你怎么不更新博客了？</strong>（丈母娘无数次问）<strong>你的报告怎么讲得那么差？</strong>（领导无数次评）这三大问题我写在了论文的致谢里（致谢是作者唯一有权随意写的，所以也是最能暴露个性的地方）：</p>

<p><img src="http://i.imgur.com/1fmkExQ.png" alt="" /></p>

<p><img src="http://i.imgur.com/MGe20J4.png" alt="" /></p>

<p>闭关整理论文准备答辩之前，想想这读了四年半读到最后索然无味的博士历程，发了条微博：</p>

<blockquote><p>黄粱五载梦，终究百川归大海</p>

<p>沙场半月功，何以倚剑上重霄</p></blockquote>

<p>怎么读最后都是要毕业，充实也好，虚空也罢。半个月准备抱佛脚，也准备不出什么好东西来，抓紧走走过场，罢了。2012年暑假看了一遍曾国藩（唐浩明），2013又看了两遍，不然马桶上干啥呢。第一遍看故事，第二遍看人情，第三遍看文学，最后发现还是文学方面好看一点，尤其是对联。关于曾文正公，第一遍看时我佩服，书生从戎，百折不挠，终成千秋大业，尤其是其中的儒家到道家的心路转换很有启发性；第二遍看就反过来了，觉得他功名心太重，黑白正邪不分，自私自利，不择手段，到头来其实是个悲剧人物，家庭方面怎一个惨字了得（女婿们一个个不争气，女儿们不是以泪洗面就是英年早逝，一个孙子被李鸿章的礼炮吓死，一个儿子穷困潦倒死了都快没钱下葬），再多的曾国藩家书又有何用，修身养性的同时屠杀平民无数，修身养性作甚？“忠、信、笃、敬”岂能用在侵略者身上？左宗棠给他的挽联写“知人之明，谋国之忠，自愧不如元辅；同心若金，攻错若石，相期无负平生”，我觉得只不过是对大限将至的文正公的一个安慰而已。抛开这些不谈，第三遍看文学时觉得他自称最差的文学其实是他最好的东西，尤其是对联写得雄浑大气，他的文学顿悟“含雄奇于淡远中”让我拍案。例如他给曾老九攻克金陵之后被遣散回家时的一联：</p>

<blockquote><p>千秋邈矣独留我</p>

<p>百战归来再读书</p></blockquote>

<p>这一联就写得很有雄奇淡远的境界，千秋与我，百战与读书，宏大处起笔，细微处落笔。打个破坏意境的比方，这就像打羽毛球重杀之后再轻吊，是技术娴熟的体现。前面“黄粱五载梦”是我从左宗棠的一联中化来的：“积石导流归大海，崆峒倚剑上重霄”。左大帅的传记我也找了一本看了，也许是作者有意扬他，全书的形象塑造很正派，是否属实我也无从考证，但文学方面我还是很欣赏的。左帅的对联以雄浑为主，气势大多比曾国藩更高，这可能也与他的硬汉性格有关。</p>

<p>答辩前小轩哥<a href="/cn/2008/05/pray-for-toefl/">烧香</a>保佑谢大通过答辩，答辩后我回一联：</p>

<blockquote><p>轩虽小，亦奉香三柱</p>

<p>谢非大，终逃此一劫</p>

<p>——答辩完：内存不足，平仄不齐；强迫病患，有些捉急。</p></blockquote>

<p>显然，暑假里曾左的联语勾起了我对对联的兴趣。我觉得这种文学形式创作起来比诗词简单一些（当然，别玩真格的，玩真格就没得玩了），但表意也能达到诗词的效果，是中文独有的现象，尤其适合强迫症患者，绞尽脑汁把几个字对整齐。</p>

<p>目前对我来说，嵌数字的对联似乎好写一些，因为让数字成对很简单，一二三四，百千十万。有一日兴起呼哧回了一通邮件，写了两篇文章，于是化曾国藩的“千秋”联作了这么一联：</p>

<blockquote><p>千秋邈矣，四时杀邮件五打</p>

<p>百战归来，三更偿文债二篇</p></blockquote>

<p>联中“打”字是一处伤，因为它是舶来语，dozen（十二）的音译，我数了数，大约消灭了六十封邮件，也就是五打，于是就用了这么一个中不中英不英的字。作为只是路过感兴趣的人，我当然也写不出什么好联来，所以只能见到好联记下，有机会化用一下，跟用引理推定理一样（引理通常是暴难证明的）。对联之事，改日再谈。</p>

<p>除开毕业之外，2013年的另一件大事就是入职RStudio了，其实在我这里一般都没什么大事，时候到了该干嘛就干嘛了。别人眼中的大事在我眼中也许是很小的事情，比如泰山大人对我不去参加毕业典礼表示不解，如此重大的人生大事怎么能不去参加呢？对我而言，毕业典礼不能让我感到兴奋或激动，我宁愿在家睡三个小时也不想在那里排队干坐三个小时，不就是毕业嘛，人生自古谁不毕业，留取相机照博士。去毕业典礼其实也就是将来“洛阳亲友如相问，就把照片给他看”，既然如此，我就借腾飞兄的袍子自己单独照了几张，最终也没去毕业典礼。还有一些从国内辛辛苦苦飞来专门参加儿女毕业典礼的父母们，我觉得真是可怜父母心。</p>

<p>回到找工作，我和JJ于2012年5月休斯顿初见，其实我对他的第一印象平平，没有太吸引我，反而是觉得伊话有些多。后来我慢慢发现了他的优点，他话多其实是他善于跟不同类型人打交道的表现，颇有海纳百川之象。他对用户界面的把握总是让人惊喜，懂得怎么把好东西包装成好产品，掌握的语言也一大堆，而且能实实在在做出干货来，不像有些人，什么语言都会，却整天只会打语言仗，C++如何如何，Java又如何如何。R这门不入计算机专业人士法眼的语言，被JJ和他的小伙伴们搞得风声水起，这不只是技术问题，同时也有心胸和视角的问题。10月的时候Mac系统搞出Mavericks版本导致Qt出了大问题，苹果下的RStudio几乎没法用了，他和小伙伴们两个星期就把前端用苹果的Cocoa重写了一遍，速度简直惊人，在那之前也有用户以恶毒的语言谩骂（怎么笨到这种大问题都没有及时发现并修正），他并没有在意。</p>

<p>于是统计出身的我就入了码农行当（问JJ你招人吗？招！那我去了？好），从2002年本科开始，我花了11年时间在这个专业上，毕业后却没做人们认为“相关”的职业，算不算浪费了十年时间呢，当然不算。我觉得学一行干一行往往会迷失在一行里，学一行干另一行反而可以看两行的东西。统计的东西，只要不是上考场推公式，我想我大概还能应付一些，尽管学得不是太扎实，一直在旁门左道晃荡着。镜头再拉远一些，为什么要一直挂在一行上呢？只要自个儿过得舒心，干啥不行呢。学术有学术的兴奋点，工业有工业的价值，码农也有码农的欢乐。曾经写“男人三十未封侯”的<a href="http://li-and-jiang.com/blog/">江堂</a>，如今乐悠悠主持着一虎一龙谈，义无返顾把封侯拜相存档在了30岁前。</p>

<p>答辩前数了一下，五年间，一共34场有记录的会议或讨论组报告（32英2中），话痨唐僧本性；开会和游玩加起来，我<a href="https://mapsengine.google.com/map/viewer?mid=z_O19zMrDpM0.kwXA6bVsh7No">到过</a>美帝17个州（外加波多黎各和维京群岛）25个城市（落地转机的除外），平均每年大约6次出远门，比我想象的要多。</p>

<p>本着“别人干什么我就不干什么反之亦然”的精神，2013年似乎大家的博客都在<a href="http://yixuan.cos.name/cn/2013/11/about-blog/">渐渐沉默</a>，连Larry Wasserman大人都<a href="http://normaldeviate.wordpress.com/2013/12/16/the-end/">罢笔</a>了，那希望我在2014年能减弱博客长草过快的趋势，尽量跟上落园园主的节奏（妄想）。2013照常欠债一堆，剪不断，还不完，理不清，辜负了很多前辈的提携和同辈的期望，让我一度觉得很沮丧，2014是否会好一些，我也不知，至少希望把图形和忍者两本书搞出来（你还好意思提），长远看我是希望能搞点统计理论和计算结合的作品，不过这种正经作品相对来说很耗时间，不知何年能有这份闲暇和兴致。人事代谢成古今，江山胜迹复登临。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>再论开源</title>
      <link>/cn/2013/11/27/open-source-again.html</link>
      <pubDate>2013-11-27T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/cn/2013/11/27/open-source-again</guid>
      <content:encoded><![CDATA[<p>几年前我写过一些关于开源的<a href="/cn/2010/08/sas-against-wpl-and-my-thoughts-on-open-source/">想法</a>，如今再来看开源，我觉得问题已经不在说教上，而是在趋势上。倒退十年或更久，那时候程序员相对还比较稀缺，软件闭源开发出来之后别人模仿的成本高，而这些年计算机教育的普及让码农数量变得越来越多，更多人懂编程了，模仿的成本大幅下降。写软件作为谋生的目的已经在弱化，更多的是为了自己的实际需求，或社区名声：你不开源？好，那我操起键盘重写一个好了，你自己觉得凉快就永远在那里呆着吧，哥不等你了。</p>

<p>Sublime Text是一款据说有超级牛力的文本编辑器（不开源），可是它几个月不更新用户就受不了了，马上有人操起键盘<a href="https://github.com/limetext/lime">重写了一个</a>，Github上点赞的一路飙升到5000多。程序员就是这样的动物，控制狂，啥事儿都想控制。如果他没有办法影响一款软件，逼急了他就拿键盘投票。这样会诞生优质开源软件，当然不可避免也会造成各路兵马混战，浪费人力。所以当今的程序主们必须转向合作的模式，没有谁能永垂不朽。Github合并请求（Pull requests）给这样的合作提供了方便的平台，让每个有能力、有意愿的用户都能揣着代码来投票，而不是传统的一个或少数几个开发者和一群用户在邮件群里战斗。</p>

<p>开源的含义已经不是开放源代码，而是开放态度。在这方面，有几位R核心团队成员的态度糟糕透顶，当年的R &amp; R（Ross/Robert）开源的成功如今变成了另一个姓氏以R开头的日不落教授的霸权（就不用说是谁了，大家都知道），这让R陷入一个尴尬的境地。如谢梁大侠所预测的，R的竞争对手已经不是SAS，而是Python，我对此表示完全同意。如果R核心团队能有更开放的态度，也许还有希望和Python在统计领域一搏，毕竟有强大的先发优势，但如今我们只能面对Python神教的不断奚落去曲线救国，R本身我们动不了，只能从R包入手。</p>

<p>什么是开放态度呢？R核心团队多年不加新人了，近年加入的是Uwe Ligges，因为他维护CRAN的Windows编译很多年了，估计深得教授欢心（一样的倔强脾气），我不觉得他加入能有多大的实质性贡献。Radford Neal在百般无奈下自己开发了pqR，因为R核心团队要么不搭理他的建议，要么过很久才有一个人出来说话。像这样有计算机背景而且做贝叶斯的人（这样的人更注重计算速度）才是R核心团队最需要添加的人，而不是整天捣鼓出更多<code>R CMD check</code>的规则，把R包作者赶得鸡飞狗跳。</p>

<p>要论R团队中最具有开放态度的人，我认为是Douglas Bates，前些日子他<a href="http://comments.gmane.org/gmane.comp.lang.r.rcpp/6518">无情吐了CRAN一脸</a>，然后华丽转身投入Julia阵营了。CRAN承认也好，不承认也好，它对用户的伤害是显而易见的。公平地讲，CRAN这帮人当然也有着不可否认的巨大的的历史贡献，所有人都该感激。教授经常抱怨有些用户不尊重他的劳动，我觉得这有什么好抱怨的呢，林子大了总是这样的，有些人确实很无礼，但有些人只是不懂规则而已，并不是有心冒犯，话说回来，谁让你制定那么多规矩呢，不是所有人都有闲心去读懂那长篇大论的CRAN政策的。很多规则本来都可以通过自动化的方式解决而不必写出来，CRAN非要坚持以古老的邮件加FTP方式维护，管理者和作者都累都烦，却又都没错，都没错的时候打仗是最激烈的，这就要了命了。有时候教授也在<a href="https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=15480">玻璃房子里扔石头</a>，修正R的bug的借用了别人的代码不致谢（好吧，有可能是看了别人的补丁然后自己闭眼重写出来的），还要顺便抹黑另一个R包，我不知道他为什么那么恨维克汉姆，我不是维大人的粉丝，但我觉得真没必要这么深仇大恨。</p>

<p>开放态度也包括使用开放的工具，包括版本控制工具和交流工具，而变化总是让人感到痛苦。指望R搬到<a href="https://github.com/wch/r-source">GIT世界</a>可能希望不大，习惯SVN的人似乎总是与GIT势不两立（从此可以看出LyX团队的开放精神），其实GIT要是没有Github撑腰，可能也火不起来，好东西要火起来除了确实是好东西之外，还需要合适的介质，就如同LyX之于LaTeX，RStudio之于R，Markdown之于可重复研究——尽管后者是实质，前者是表象，用户天生就是外貌协会的，再好的东西只要不好看就没戏。再说交流工具，邮件列表是传统工具，我认为它应该退出历史舞台了，弊病太多，作为吐嘈达人，我又忍不住<a href="http://article.gmane.org/gmane.comp.lang.r.general/303009">吐了邮件列表一脸</a>。</p>

<p>总而言之，我觉得开源世界的大致势头就是：老一辈倾向于系统控制狂，什么邮件系统版本控制系统bug报告系统，统统自己配置，但现在的系统越来越先进和复杂，想要控制整个系统需要花费越来越多的精力，这些杂碎的事情将耗尽主力队员的精力，而且越来越落后；新一辈摩拳擦掌，虽然经验不足，但解决局部区域的问题还是可以的，而且能有效利用更现代化的工具提高生产力和影响力。未来自由软件的竞争，将不仅是专业实力的竞争，更是综合素质的竞争。在你尽情鄙视社交网络和各种酷炫网站并坚守“一切皆纯文本文件”的时候，你也会被时代浪潮淹没。不公平？确实不公平，但事情就是这样。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Markdown or LaTeX?</title>
      <link>/en/2013/10/19/markdown-or-latex.html</link>
      <pubDate>2013-10-19T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/en/2013/10/19/markdown-or-latex</guid>
      <content:encoded><![CDATA[<blockquote><p>What happens if you ask for too much power from Markdown?</p></blockquote>

<p><img src="http://i.imgur.com/vGwGF7s.gif" alt="" /></p>

<p>R Markdown is one of the document formats that <strong>knitr</strong> supports, and it is
probably the most popular one. I have been asked many times about the choice
between Markdown and LaTeX, so I think I'd better wrap up my opinions in a
blog post. These two languages (do you really call Markdown a <em>language</em>?)
are kind of at the two extremes: Markdown is super easy to learn and type,
but it is primarily targeted at HTML pages, and you do not have fine control
over typesetting (
<a href="http://cran.r-project.org/web/packages/knitr/vignettes/docco-classic.html">really?</a>
<a href="http://cran.r-project.org/web/packages/knitr/vignettes/docco-linear.html">really?</a>),
because you only have a very limited number of HTML tags in the output;
LaTeX is relatively difficult to learn and type, but it allows you to do
precise typesetting (you have control over anything, and that is probably
why a lot of time can be wasted).</p>

<h2>What is the problem?</h2>

<p>What is the root problem? I think one word answers everything: <strong>page</strong>! Why
do we need pages? <strong>Printing</strong> is the answer.</p>

<p>In my eyes, the biggest challenge for typesetting is to arrange elements
properly with the restriction of pages. This restriction seems trivial, but
it is really the root of all "evil". Without having to put things on pages,
life can be much easier in writing.</p>

<p>What is the root of this root problem in LaTeX? One concept: <em>floating
environments</em>. If everything comes in a strictly linear fashion, writing
will be just writing; typesetting should be no big deal. Because a graph
cannot be broken over two pages, it is hard to find a place to put it. By
default, it can float to unexpected places. The same problem can happen to
tables (see the end of <a href="/en/2012/10/lyx-vs-latex/">a previous post</a>). You
may have to add or delete some words to make sure they float to proper
places. That is endless trouble in LaTeX.</p>

<p>There is no such a problem in HTML/Markdown, because there is no page. You
just keep writing, and everything appears linearly.</p>

<h2>Can I have both HTML and PDF output?</h2>

<p>There is no fault being greedy, and it is natural to ask the question
whether one can have both HTML and PDF output from a single source document.
The answer is maybe yes: you can go from LaTeX to HTML, or from Markdown to
LaTeX/PDF.</p>

<ul>
<li><a href="http://johnmacfarlane.net/pandoc/">pandoc</a> can convert Markdown to almost anything</li>
<li><a href="http://enc.com.au/docs/latexhtml/">many tools</a> to convert LaTeX to HTML</li>
</ul>


<p>But remember, Markdown was designed for HTML, and LaTeX was for PDF and
related output formats. If you ask for more power from either language, the
result is not likely be ideal, otherwise one of them must die.</p>

<h2>How to make the decision?</h2>

<p>If your writing does not involve complicated typesetting and primarily
consists of text (especially no floating environments), go with Markdown. I
cannot think of a reason why you must use LaTeX to write a novel. See
Hadley's new book <a href="http://adv-r.had.co.nz">Advanced R programming</a> for an
excellent example of Markdown + <strong>knitr</strong> + other tools: the typesetting
elements in this book are very simple -- section headers, paragraphs, and
code/output. That is pretty much it. Eventually it should be relatively easy
to convert those Markdown files to LaTeX via Pandoc, and publish a PDF using
the LaTeX class from Chapman &amp; Hall.</p>

<p>For the rest of you, what I'd recommend is to think early and make a
decision in the beginning; avoid having both HTML and PDF in mind. Ask
yourself only one question: must I print the results nicely on paper? If the
answer is yes, go with LaTeX; otherwise just choose whatever makes you
comfortable. The book <a href="http://www.matthewjockers.net/2013/09/03/tawr/">Text Analysis with
R</a> authored by <a href="http://www.matthewjockers.net/">Matthew
Jockers</a> is an example of LaTeX + <strong>knitr</strong>.
Matt also asked me this question about Markdown vs LaTeX last week while he
was here at Iowa State. For this particular book, I think Markdown is
probably OK, although I'm not quite sure about a few environments in the
book, such as the chapter abstracts.</p>

<p>It is not obvious whether we must print certain things. I think we are just
too used to printing. For example, dear professors, must we print our
homework? (apparently <a href="http://www.stat.ubc.ca/~jenny/STAT545A/">Jenny</a> does
not think so; I saw her grade homework on <a href="http://rpubs.com">RPubs.com</a>!) Or
dear customers, must we submit reports in PDF? ... In this era, you have
laptops, iPad, Kindle, tablets and all kinds of electronic devices that can
show rich media, why must you print everything (in black and white)?</p>

<p>For those who are still reading this post, let me finish with a side story:
Matt, a LaTeX novice, taught himself LaTeX a few months ago, and he has
finished the draft of a book with LaTeX! Why are you still hesitating about
the choice of tools? Shouldn't you just go ahead and get the * done?
Although all roads lead to Rome, some people die at the starting line
instead of on the roads.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>After Three Months I Cannot Reproduce My Own Book</title>
      <link>/en/2013/09/05/cannot-reproduce-my-own-book.html</link>
      <pubDate>2013-09-05T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/en/2013/09/05/cannot-reproduce-my-own-book</guid>
      <content:encoded><![CDATA[<blockquote><p>I thought I could easily jump to a high standard (reproducibility), but I
  failed.</p></blockquote>

<p><img src="http://i.imgur.com/niyXcfk.gif" alt="" /></p>

<p>Some of you may have noticed that the knitr book is finally out. <a href="http://www.amazon.com/gp/product/1482203537">Amazon is
offering a good price</a> at the
moment, so if you are interested, you'd better hurry up.</p>

<p>I avoided the phrase "Reproducible Research" in the book title, because I
did not want to take that responsibility, although it is related to
reproducible research in some sense. The book was written with knitr v1.3
and R 3.0.1, as you can see from my <code>sessionInfo()</code> in the preface.</p>

<p>Three months later, several things have changed, and I could not reproduce
the book, but that did not surprise me. I'll explain the details later. Here
I have extracted the first three chapters, and released the corresponding
source files in the <a href="https://github.com/yihui/knitr-book">knitr-book</a>
repository on Github. You can also find the link to download the PDF there.
This repository may be useful to those who plan to write a book using R.</p>

<p>What I could not reproduce were not really important. The major change in
the recent knitr versions was the syntax highlighting commands, e.g.
<code>\hlcomment{}</code> is <code>\hlcom{}</code> now, and the syntax highlighting has been
improved by the <a href="http://cran.r-project.org/package=highr"><strong>highr</strong></a> package
(sorry, Romain). This change brought a fair amount of changes when I look at
<code>git diff</code>, but these are only cosmetic changes.</p>

<p>I tried my best to avoid writing anything that is likely to change in the
future into the book, but as a naive programmer, I have to say sorry that I
have broken two little features, although they may not really affect you:</p>

<ul>
<li>the preferred way to stop knitr in case of errors is to set the chunk
option <code>error = FALSE</code> instead of the package option <code>stop_on_error</code>,
which has been deprecated (Section 6.2.4);</li>
<li>for external code chunks (Section 9.2), the preferred chunk delimiter is
<code>## ----</code> instead of <code>## @knitr</code> now;</li>
</ul>


<p>Actually the backward-compatibility is still there, so they will not really
break until a long time later.</p>

<p>With exactly the same software environment, I think I can reproduce the
book, but that does not make much sense. Things are always evolving. Then
there are two types of reproducible research:</p>

<ol>
<li>the "dead" reproducible research (reproduce in a very specific environment);</li>
<li>the reproducible research that evolves and generalizes;</li>
</ol>


<p>I think the latter is more valuable. Being reproducible alone is not the
goal, because you may be reproducing either real findings or simply old
mistakes. As Roger Peng
<a href="http://simplystatistics.org/2013/08/21/treading-a-new-path-for-reproducible-research-part-1/">wrote</a>,</p>

<blockquote><p>[...] reproducibility cannot really address the validity of a scientific claim
as well as replication</p></blockquote>

<p>Roger's recent three blog posts on reproducible research are very worth
reading. This blog post of mine is actually not quite relevant (no data
analysis here), so I recommend my readers to move over there after you haved
checked out the <a href="https://github.com/yihui/knitr-book">knitr-book</a> repository.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>My first Bioconductor conference (2013)</title>
      <link>/en/2013/07/21/bioconductor-2013.html</link>
      <pubDate>2013-07-21T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/en/2013/07/21/bioconductor-2013</guid>
      <content:encoded><![CDATA[<p>The <a href="https://secure.bioconductor.org/BioC2013/">BioC 2013 conference</a> was
held from July 17 to 19. I attended this conference for my first time,
mainly because I'm working at the Fred Hutchinson Cancer Research Center
this summer, and the conference venue was just downstairs! No flights, no
hotels, no transportation, yeah.</p>

<p>Last time I wrote about my <a href="/en/2013/03/on-enar-or-statistical-meetings-in-general/">first ENAR
experience</a>, and
let me tell you why the BioC conference organizers are smart in my eyes.</p>

<h2>A badge that never flips</h2>

<p>I do not need to explain this simple design -- it just will not flip to the
damn blank side:</p>

<p><img src="http://i.imgur.com/fOy3LtR.jpg" alt="" /></p>

<h2>The conference program book</h2>

<p>The program book was only four pages of the schedule (titles and speakers).
The abstracts are online. Trees saved.</p>

<h2>Lightning talks</h2>

<p>There were plenty of lightning talks. You can talk whatever you want.</p>

<h2>Live coding</h2>

<p>On the developer's day, Martin Morgan presented some buggy R code to the
audience (provided by <a href="http://proteome.sysbiol.cam.ac.uk/lgatto/">Laurent
Gatto</a>), and asked us to debug it
right there. Wow!</p>

<h2>Everything is free after registration</h2>

<p>The registration includes almost everything: lunch, beer, wine, coffee, fruits,
snacks, and most importantly, Amazon Machine Instances (AMI)!</p>

<h2>AMI</h2>

<p>This is a really shiny point of BioC! If you have ever tried to do a
software tutorial, you probably know the pain of setting up the environment
for your audience, because they use different operating systems, different
versions of packages, and who knows what is going to happen after you are on
your third slide. At a workshop last year, I had the experience of spending
five minutes figuring out why a keyboard shortcut did not work for one
Canadian lady in the audience, and it turned out she was using the French
keyboard layout.</p>

<p>The BioC organizers solved this problem beautifully by installing the
RStudio server on AMI. Every participant was sent a link to the Amazon
virtual machine, and all they need is a web browser and wireless connection
in the room. All people run R in exactly the same environment.</p>

<p>Isn't that smart?</p>

<h2>Talks</h2>

<p>I do not really know much about biology, although a few biological terms
have been added to my volcabulary this summer. When a talk becomes
biologically oriented, I will have to give up.</p>

<p>Simon Urbanek talked about big data in R this year, which is unusual, as
mentioned by himself. Normally he shows fancy graphics (e.g. iplots). I did
not realize the significance of this <a href="http://cran.r-project.org/src/base/NEWS.html">R 3.0.0
news</a> item until his talk:</p>

<blockquote><p>It is now possible to write custom connection implementations outside core
  R using <code>R_ext/Connections.h</code>. Please note that the implementation of
  connections is still considered internal and may change in the future (see
  the above file for details).</p></blockquote>

<p>Given this new feature, he implemented the <a href="https://github.com/s-u/hdfsc">HDFS
connections</a> and <a href="https://github.com/s-u/zmqc">0MQ-based
connections</a> in R single-handedly (well, that
is always his style).</p>

<p>You probably have noticed the previous links are Github repositories. Yes!
Some R core members really appreciate the value of social coding now! I'm
sure Simon does. I'm aware of other R core members using Github quietly (DB,
SF, MM, PM, DS, DTL, DM), but I do not really know their attitude toward it.</p>

<p>Joe Cheng's Shiny talk is shiny as usual. Each time I attend his talk, he
will show a brand new amazing demo. Joe is the only R programmer that makes
me feel "the sky is the limit (of R)". The audience were shocked when they
saw a heatmap that they were so familiar with suddently became interactive
in a Shiny app! BTW, Joe has a special sense of humor when he talks about
an area in which he is not an expert (statistics or biology).</p>

<p>RStudio 0.98 is going to be awesome. I'm not going to provide the links
here, since it is not released yet. I'm sure you will find the preview
version if you really want it.</p>

<h2>Bragging rights</h2>

<ul>
<li>I met Robert Gentleman for the first time!</li>
<li>I dare fall asleep during Martin Morgan's tutorial! (sorry, Martin)</li>
<li><a href="http://www.bioconductor.org/help/workflows/">some</a> Bioconductor web pages
were built with knitr/R Markdown!</li>
</ul>


<h2>Next steps</h2>

<p>Given Biocondutor's open-mindedness to new technologies (GIT, Github, AMI,
Shiny, ...), let's see if it is going to take over the world. Just kidding.
But not completely kidding. I will keep the conversation going before I
leave Seattle around mid-August, and get something done hopefully.</p>

<p>If you have any feature requests or suggestions to Bioconductor, I will be
happy to serve as the "conductor" temporarily. I guess they should set up a
blog at some point.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>R Package Versioning</title>
      <link>/en/2013/06/27/r-package-versioning.html</link>
      <pubDate>2013-06-27T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/en/2013/06/27/r-package-versioning</guid>
      <content:encoded><![CDATA[<p>This should be what it feels like to bump the major version of your software:</p>

<p><img src="http://i.imgur.com/hfdOEsw.gif" alt="bump the major version" /></p>

<p>For me, the main reason for package versioning is to indicate the (slight or
significant) differences among different versions of the same package,
otherwise we can keep on releasing the version 1.0.</p>

<p>That seems to be a very obvious fact, so here are my own versioning rules,
with some ideas borrowed from <a href="http://semver.org/">Semantic Versioning</a>:</p>

<ol>
<li>a version number is of the form <code>major.minor.patch</code> (<code>x.y.z</code>), e.g., <code>0.1.7</code></li>
<li>only the version <code>x.y</code> is released to CRAN</li>
<li><code>x.y.z</code> is always the development version, and each time a new feature or
a bug fix or a change is introduced, bump the patch version, e.g., from
<code>0.1.3</code> to <code>0.1.4</code></li>
<li>when one feels it is time to release to CRAN, bump the minor version,
e.g., from <code>0.1</code> to <code>0.2</code></li>
<li>when a change is crazy enough that many users are presumably going to
yell at you (see the illustration above), it is time to bump the major
version, e.g., from <code>0.18</code> to <code>1.0</code></li>
<li>the version <code>1.0</code> does not imply maturity; it is just because it is
potentially very different from <code>0.x</code> (such as API changes); same thing
applies to <code>2.0</code> vs <code>1.0</code></li>
</ol>


<p>I learned the rule #3 from Michael Lawrence (author of <strong>RGtk2</strong>) and I
think it is a good idea. In particular, it is important for brave users who
dare install the development versions. When you ask them for their
<code>sessionInfo()</code>, you will be aware of which stage they are at.</p>

<p>Rule #2 saves us a little bit energy in the sense that we do not need to
write or talk about the <strong>foo</strong> package 1.3.548, which is boring to type or
speak. Normally we say <strong>foo</strong> 1.3. As a person whose first language is not
English, speaking the patch version does consume my brain memory and slows
down my thinking while I'm talking. When I say it in Chinese, I feel boring
and unnecessarily geeky. Yes, I know I always have weird opinions.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>You Do Not Need to Tell Me I Have A Typo in My Documentation</title>
      <link>/en/2013/06/10/fix-typo-in-documentation.html</link>
      <pubDate>2013-06-10T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/en/2013/06/10/fix-typo-in-documentation</guid>
      <content:encoded><![CDATA[<p><img src="http://i.imgur.com/j9NYXiQ.png" alt="help me with Github pull requests" /></p>

<p>So I just got yet yet another
<a href="http://yihui.name/knitr/demo/sweave/#comment-924948061">comment</a> saying
"you have a typo in your documentation". While I do appreciate these kind
reminders, I think it might be a good exercise for those who want to try GIT
and <a href="https://help.github.com/articles/using-pull-requests">Github pull
requests</a>, which make
it possible for you to contribute to open source and fix obvious problems
<em>with no questions being asked</em> -- just do it yourself, and send the changes
to the original author(s) through Github.</p>

<p>The official documentation for Github pull requests is a little bit verbose
for beginners. Basically what you need to do for simple tasks are:</p>

<ol>
<li>click the <code>Fork</code> button and clone the repository in your own account;</li>
<li>make the changes in your cloned version;</li>
<li>push to your repository;</li>
<li>click the <code>Pull Request</code> button to send a request to the original author;</li>
</ol>


<p>For trivial changes, sometimes I accept them on my cell phone while I'm
still in bed. No extra communication is needed.</p>

<p>Occasionally I see reports of this kind of trivial documentation changes in
the R-devel mailing list, and I believe that is just horribly inefficient.
You could have done this quietly and quickly, and the developers could have
merged the changes with a single mouse click. (Oh, okay, well, you know,
SVN, mailing lists, ...)</p>

<p>For the <a href="https://github.com/yihui/knitr"><strong>knitr</strong> repository</a>, it has two
branches: <code>master</code> and <code>gh-pages</code>. The R package lives in the <code>master</code>
branch, and the <strong>knitr</strong> website lives in the <code>gh-pages</code> branch. If you
want to fix any problems in the website, just check out the <code>gh-pages</code>:</p>

<pre><code>git checkout gh-pages
</code></pre>

<p>All pages were written in Markdown, so edit them with your favorite text
editor. For example, as the above comment pointed out, I omitted a right
parenthesis <code>)</code> in <code>_posts/2012-02-24-sweave.md</code>, and you just add it, save
the file, write a GIT commit message, push to your repository and send the
pull request.</p>

<p>I know I can do this by myself in five seconds, and it takes me way more
time to write this blog post, but I just want everybody to know how people
with different skill levels can play their roles in software development.</p>

<p>Let's see how many minutes it takes for the pull request to come after I
publish this blog post. Hurry!! :)</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>A Few Tips for Writing an R Book</title>
      <link>/en/2013/06/03/tips-for-writing-an-r-book.html</link>
      <pubDate>2013-06-03T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/en/2013/06/03/tips-for-writing-an-r-book</guid>
      <content:encoded><![CDATA[<p>I just finished fixing (hopefully all) the problems in the <a href="http://amzn.com/1482203537">knitr book</a> returned from the copy editor. David Smith has kindly <a href="http://blog.revolutionanalytics.com/2013/05/two-forthcoming-r-books.html">announced</a> this book before I do. I do not have much to say about this book: almost everything in the book can be found in the online documentation, questions &amp; answers and the source code. The point of buying this book is perhaps you do not have time to read through all the two thousand questions and answers online, and I did that for you.</p>

<p><a href="http://amzn.com/1482203537"><img src="http://images.tandf.co.uk/common/jackets/crclarge/978148220/9781482203530.jpg" alt="the knitr book" /></a></p>

<p>This is my first book, and obviously there have been a lot for me to learn about writing a book. In retrospect, I want to share a few tips that I found useful (in particular, for those who plan to write for Chapman &amp; Hall):</p>

<ol>
<li>although it sounds like shameless self-promotion, using <code>knitr</code> made it a lot easier to manage R code and its output for the book; for example, I could quickly adapt to R 3.0.1 from 2.15.3 after I came back from a vacation; if I were to write a second edition, I do not think I will have big trouble with my R code in the book (it is easy to make sure the output is up-to-date);</li>
<li>I put my source documents under version control, which helped me watch the changes in the output closely; for example, I noticed the source code of the function <code>fivenum()</code> in base R was changed from R 2.15.3 to 3.0.0 thanks to GIT (R core have been updating base R everywhere!);</li>
<li>(opinionated) some people might be very bored to hear this: use LyX instead of plain LaTeX... because you are writing, not coding; LaTeX code is not fun to read...</li>
<li>for the LaTeX document class <code>krantz.cls</code> (by Chapman &amp; Hall):

<ul>
<li><p>to solve the only stupid problem in LaTeX (i.e., floating environments float to silly places by default), use something like this
      \renewcommand{\textfraction}{0.05}
      \renewcommand{\topfraction}{0.8}
      \renewcommand{\bottomfraction}{0.8}
      \renewcommand{\floatpagefraction}{0.75}</p>

<p>I'm aware of the <code>float</code> package and the <code>H</code> option, and options like <code>!tbp</code>; I just do not want to <em>force</em> LaTeX to do anything. It may or may not be happy at some point.</p></li>
<li>put <code>\usepackage{emptypage}</code> in the preamble to make empty pages really empty, as required by the copy editor.</li>
<li>the document class <code>krantz.cls</code> does not work with the <strong>hyperref</strong> package, meaning that you cannot create bookmarks in the PDF; I have posted <a href="http://tex.stackexchange.com/q/86005/9128">the solution here</a>.</li>
</ul>
</li>
<li>for authors whose native language is not English like me, here is a summary of my problems in English:

<ul>
<li><p>when you want to use <code>which</code>, use <code>that</code> instead, unless there is a comma ahead, or you really want to emphasize a very specific object; e.g.,</p>

<blockquote><p>"here is a package <em>that</em> is helpful" (correct)</p>

<p>"here is a package <em>which</em> is helpful" (wrong)</p>

<p>"we will introduce an extremely important technology next, which has revolutionized the life of poor statisticians"</p></blockquote></li>
<li><p>it is "A, B, and C" instead of "A, B and C"</p></li>
<li>do not forget the comma in other places, either: "e.g.,", "i.e.,", "foo and bar, respectively"; actually, try to use the comma whenever possible to break long sentences into shorter pieces</li>
</ul>
</li>
<li>for the plots, use the <code>cairo_pdf()</code> device when possible; in <strong>knitr</strong>, this means the chunk option <code>dev = 'cairo_pdf'</code>; the reason for the choice of <code>cairo_pdf()</code> over the normal <code>pdf()</code> device is that it can embed fonts in the PDF plot files, otherwise the copy editor will require you to embed all the fonts in the final PDF file of the book; normally <code>pdflatex</code> will embed fonts, and if there are fonts that are not embedded, it is very likely that they are from R graphics;</li>
<li>include as many figures as possible (I have 51 figures in this 200-page book), because this will make the number of pages grow faster (I'm evil) so that you will not feel frustrated, and the readers will not fall into the hell of endless text, just pages after pages;</li>
<li>prepare an extra monitor for copyediting;</li>
<li>learn a little bit about <code>pdftk</code>, because you may want to use it finally, e.g., replace one page with a blank page in the frontmatter;</li>
<li>learn these <a href="http://biostatmatt.com/uploads/ProofreadSymbols.pdf">copy editing symbols</a> (thanks, Matt Shotwell);</li>
</ol>


<p>One thing I did not really understand was the punctuation marks like commas and periods should go <em>inside</em> quotation marks, e.g.,</p>

<blockquote><p>I have "foo" and "bar."</p></blockquote>

<p>This makes me feel weird. I'm more comfortable with</p>

<blockquote><p>I have "foo" and "bar".</p></blockquote>

<p>There was also one thing that I did not catch by version control -- one figure file went wrong and I did not realize it, because normally I do not put binary files under version control. Fortunately, I caught it by my eyes. Karl Broman mentioned the same problem to me a while ago. I know there are tools for comparing images (ImageMagick, for example), and I was just too lazy to learn them.</p>

<p>I will be glad to know the experience of other authors, and will try to update this post according to the comments.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>那些一见钟情与日久生情的人</title>
      <link>/cn/2013/05/19/love-at-first-sight.html</link>
      <pubDate>2013-05-19T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/cn/2013/05/19/love-at-first-sight</guid>
      <content:encoded><![CDATA[<p>这标题有点那啥，其实只是五月回国一些杂感而已（本文初稿写于5月，发布于12月）。我把我喜欢的人分为两类，一种类似于一见钟情，一种类似于日久生情，时间所限没法写到每一个人，只能想到哪儿写到哪儿，不管怎么写，到最后跑题都是一定的。</p>

<p>第一种人初次见面就能感受到某种共同的激动，举几个例子：</p>

<p>今年3月在奥兰多的<a href="http://enar.org/meetings.cfm">ENAR</a>上第一次见到<a href="http://www.biostat.wisc.edu/~kbroman/">Karl Broman</a>，他是个很害羞的人，又有很多强烈的观点，而且名气也不是大得没边，我和这种人比较对得上眼。在太拉风的人面前我的手会像两只香蕉一样不知道往哪儿放，没奇异观点的人难以引起我的注意，名气大过天的人我又勾搭不上，而且我这两年渐渐对名气产生反感。Karl名校毕业（其导师名气真的大过天了），统计根基扎实，喜欢钻研各种边边角角新技术，什么D3啊D语言啊，R语言就不必说了。他感到非常得意的一件事就是他给D语言发过一个合并请求（Pull Request，简称PR），在遇到他之前，我根本不知道D语言是神马东西。我们开发cranvas包有两三年时间了（其实这两年都没什么动静了），他连这个都用过。虽然他本行是做生物统计的，但他对统计图形也很有兴趣，包括交互式图形。这和我的兴趣相合，于是请他用Google Hangout视频给我们做了一个<a href="http://www.biostat.wisc.edu/~kbroman/presentations/">远程报告</a>，没想到他还紧张了一番，头一次见教授还有紧张的时候。Karl和我另一个相似的地方就是牢骚过剩，开完ENAR，我们一起<a href="/en/2013/03/on-enar-or-statistical-meetings-in-general/">炮轰会议组织者</a>，包括为什么会议注册要强制性交钱去迪斯尼乐园玩（尽管可能是打过折了），除了看烟花，一路都在聊天也没干别的，最后在迪斯尼里他请了我晚饭，觉得学生太可怜了，其实后来我善良的老板都给报了，我也不用花钱（要花钱的会议鬼才会去）。Karl在学术研究上的好奇心也很强，晚饭他谈到一篇二三十年代的数学论文（我已经想不起来具体内容了），说从那里找到了灵感，在文献浩如烟海的今天还有人愿意并能够找到那么古老的文献去读，我估计这样的人不太多了。Karl认为<a href="http://stephenslab.uchicago.edu/">Matt</a>是统计和人类基因学领域最聪明的人，没有之一。他有自己强烈欣赏的人，和我也相像。</p>

<p>这次回国第一次见<a href="http://joegaotao.github.io">高涛</a>真人，哎呀别闹，我不是说高涛是道士的意思啦。太云通常叫他涛妹，一见到真人，果然端正标致，眉清目秀，和我高中时的一个好朋友长得很像，顿时好感翻倍。高涛干活非常踏实卖力，怡轩在今年的R会议之后<a href="http://yixuan.cos.name/cn/2013/05/6th-china-r-conference/">发了</a>两张两届会议主席的催泪照（我盗链一下）：</p>

<p><img src="http://i.imgur.com/iVR1phH.jpg" alt="熊熹" /></p>

<p><img src="http://i.imgur.com/4Ce2bct.jpg" alt="高涛" /></p>

<p>历届会议主席都累成这样，真教人……当当当当……切……泪洒键盘呐啊啊啊……高涛一直做统计之都的总编辑，说得好听叫总编辑，说得不好听就是什么杂事要是找不到人干了就是他扛，个中辛酸谁人知。和前面说的Karl不一样，高涛和我的共同点没那么多（也许是还没发现），这里面主要是我比较欣赏和佩服他的坚持，当然这里面有很多太云的功劳（鸡血能量太大）。学术方面简言之呢，就是理论和代码兼顾，都能钻下去，听说前辈高人在哪里做报告就<a href="http://joegaotao.github.io/cn/2013/07/PKU-summer-short-course/">两眼放光</a>跑去听，听完还要打听人家有没有写R包，我很喜欢看别人的文章里写着写着光芒四射仿佛一个白胡子老头在天上扑扇着翅膀召唤你的感觉，就像高涛提到Tukey的时候一样。类似地，我也喜欢听人做报告的时候报告者自己激动地从椅子上跳起来，告诉听众这个地方有多牛，这样的人也属于我一见钟情的，例子包括萌主<a href="http://weibo.com/zhouyummy">周扬</a>和<a href="https://github.com/jlaake">Jeff Laake</a>，萌主是说自己的东西牛（但真的是很牛，所以才有喜感和萌感），Jeff是说别人的东西牛（主要是韩美美模型，即隐马尔可夫模型HMM）。</p>

<p>第二种人是认识几年之后慢热型的，几个例子：</p>

<p>我结识<a href="http://maths-people.anu.edu.au/~johnm/">John Maindonald</a>是2008年1月，缘于一封无聊的骚扰邮件：</p>

<p><img src="http://i.imgur.com/JtwdYA5.png" alt="John Maindonald" /></p>

<p>当时是想作为R新手一枚把CRAN上所有的册子读一遍，John的册子是列表里的第一篇，于是点开读，读完写了7点笔记发给他。后面的事情可能客官们都知道了，John老爷子回了一封热情洋溢的感谢信，顺便寄了一本他的书给我（现在大概还在人大明德主楼1037房间我的旧座那儿），08年底我申请出国请他写了推荐信，后来断断续续有些联系（包括JSS上的动画论文），但一直没见过真人。08年第一届R会议我试图用Skype连线请他报告没有成功，五年后我们请他到北京参加了第六届R会议，于是我见到了真人，他也是北京会场的第一个外国演讲者。我联系人都很松散，有些人尽管我很久不联系，但我并没有忘记，像这种五年始得一见对我来说其实也没太多激动，因为见与不见，交情都在那儿了。再过两年老爷子都奔八十了，到了这把年纪，难免会想驾鹤之事，回澳大利亚之后他给我写信希望能给他的新书“Statistically Informed Data Mining”找一个合作者，以便哪日归去之后能把这本书和R包维护下去，所谓人之将死，其言也善，看得我心里一丝悲凉。John的研究兴趣包括数据挖掘和统计计算，也比较符合我的胃口，当然我的级别和他差远了，打开R的帮助文档<code>?plot.lm</code>就可以看到他的名字。七老八十了还对knitr里的各种技术问题感兴趣，在北京见面时问了我一些，后来邮件又问了一些。见面之后我发现其实John也是一个有些害羞的人，同时观点比较奇特，和传统统计学家不一样。他的新书书名就能反映这一点，在数据挖掘前加了一个定语，强调统计的视角。</p>

<p>我看完了CRAN上的第一份册子，它也变成了我看完的最后一份册子，从此我再没往下看过CRAN上的任何材料。09年来了美帝，生活轨迹发生了变化，R变成了日常工具，无他，惟手熟耳。</p>

<p>老爷子和我颇有忘年交之意，而COS里的多数人年纪都比我小，都是我比较欣赏的人，其中可能以小轩哥为首（90后，这上哪儿说理去）。共同爱好R以及<a href="https://github.com/yixuan/showtext">时</a>不<a href="https://github.com/yixuan/sysfonts">时</a>捣<a href="https://github.com/yixuan/R2SWF">鼓</a>一<a href="https://github.com/yixuan/Layer">些</a>不靠<a href="https://github.com/yixuan/rarpack">谱</a>的东西出来，这是一重重要的链接。文与字兼修，又是一重链接。交给小轩哥的事情就像交给涛妹一样靠谱，加上钻研精神以及<a href="http://cos.name/2010/04/kernel-density-estimation-with-unbounded-region/">灵气</a>，着实是不可多得的一枚人才，就是太谦虚谨慎了，做事要尽善尽美，明明跟我一样是巨蟹座，不知为啥仿佛有些处女座的性格。R会议上我也是第一次见<a href="http://weibo.com/road2stat">肖楠</a>君，中南三杰之一，黑客君一枚，趁我出国了就冒泡出来了，这几年的R会议上我在他不在，他在我不在，玩躲猫猫。好歹这次总算撞上了，住在同一个酒店，但因为第二天一大早我要赶飞机，头天晚上没能聊尽兴（魔王何通也同在），希望有朝一夜能秉烛续谈。肖楠君比较对我胃口的是美感，诸如书法、字体和幻灯片之类的。其他人如太云之辈（流？）就不必提了，回头去看仿佛就是编排好的一场戏，某年某月某日某网络ID初识，某日任版主，某日初入人大见真人，某日再入人大面试，某日被录取，某日担起COS大任，某日毕业，某日出家。</p>

<p>COS论坛上偶尔会冒出一些吸引我注意的人，因为总是ID相见，所以经常对不上号，也记不住谁是谁，经常赞叹一番就忘了。这几年来，我提过主伟呈，踏实勤垦君一枚，院校出身不太好，但几年如一日持续发力，终会出人头地。另一枚不太为人知的人才是姜晓东，晓东君是当年破解我QQ号MD5码的人之一，但我一直没把他跟论坛上的ID连起来，导致有一天我看见一个帖子拍案大赞，写邮件求结交，结果晓东君回信说，“益辉君我们早就认识啊！”我当时都囧到桌子底下去了。他的院校出身一样不太好，但求知欲、好奇心以及动手能力都让人赞叹。</p>

<p>我前面主要都是在说情商方面，论纯学术的话，还是中科院的朋友们给我印象最深。我觉得中国高校里就两个地方的人比较纯朴，就是中科院和中科大，但科大的智商都太高，会让我觉得我的脑袋像一颗西瓜不知道往哪儿搁。中科院有很多自然科学方面的系所，植物所啊动物所海洋研究所什么的，我不知道我以前说过没有，在自然科学和社会科学中，我强烈偏好自然科学，主要是因为人心难测，相比之下老鼠心还是好测一些。其实还是我智商有限，自己行当里的东西扛不住，只能去看看别的行当里在用统计干啥，他们的统计问题相对来说会简单一点，我就是这么邪恶的一个人。最近一个<a href="http://cos.name/cn/topic/142002">苏妹妹</a>（SMM）的问题对我来说就是一个有趣的作业题，这些中科院的老大们口口声声说自己外行，其实他们知道的东西并不少，要是不用花时间杀兔子养细菌，没准儿这里面会出好多高水平的统计学家，也许他们该对着那群兔子说，“诸臣误朕也！”</p>

<p>诶？我怎么说到兔子那里去了？</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Travis CI for R! (not yet)</title>
      <link>/en/2013/04/12/travis-ci-general-purpose.html</link>
      <pubDate>2013-04-12T00:00:00+08:00</pubDate>
      <author></author>
      <guid>/en/2013/04/12/travis-ci-general-purpose</guid>
      <content:encoded><![CDATA[<p>A few days ago I <a href="/en/2013/04/travis-ci-for-r/">wrote</a> about Travis CI, and was wondering if we could integrate the testing of R packages into this wonderful platform. A reader (Vincent Arel-Bundock) pointed out in the comments that Travis was running Ubuntu that allows you to install software packages at your will.</p>

<p>I took a look at the <a href="http://about.travis-ci.org/docs/">documentation</a>, and realized they were building and testing packages in virtual machines. No wonder <code>sudo apt-get</code> works. Remember <code>apt-get -h | tail -n1</code>:</p>

<blockquote><p>This APT has Super Cow Powers. (APT有超级牛力)</p></blockquote>

<h2>R on Travis CI</h2>

<p>Now we are essentially system admins, and we can install anything from Ubuntu repositories, so it does not really matter that Travis CI does not support R yet. Below are a few steps to integrate your R package (on Github) into this system:</p>

<ol>
<li>follow the <a href="http://about.travis-ci.org/docs/user/getting-started/">official guide</a> util you see <code>.travis.yml</code>;</li>
<li>copy my <a href="https://github.com/yihui/knitr/blob/master/.travis.yml"><code>.travis.yml</code></a> for the <strong>knitr</strong> package if you want, or write your own;

<ul>
<li>I use a custom library path <code>~/R</code> to install add-on R packages so that I do not have to type <code>sudo</code> everywhere</li>
<li>at the moment I use the RDev PPA by Michael Rutter to install R 3.0.0 since his plan for R 3.0 on CRAN is in May; at that time I'll change this PPA to a CRAN repository</li>
<li>since <code>R CMD check</code> requires all packages in <code>Suggests</code> as well, I install <strong>knitr</strong> using <code>install.packages(dep = TRUE)</code> to make sure all relevant packages are installed</li>
<li><code>make install</code> and <code>make check</code> are wrappers of <code>R CMD build</code> and <code>R CMD check</code> respectively, defined in the <a href="https://github.com/yihui/knitr/blob/master/Makefile"><code>Makefile</code></a></li>
</ul>
</li>
<li>push this <code>.travis.yml</code> to Github, and Travis CI will start building your package when a worker is available (normally within a few seconds);</li>
</ol>


<p>By default you will receive email notifications when there are changes in the build. You can also find the guide on the build status image in the documentation as well, e.g. <a href="https://travis-ci.org/yihui/knitr"><img src="https://travis-ci.org/yihui/knitr.png" alt="Build Status" /></a></p>

<p>What I described here actually applies to any software packages (not only R), as long as the dependencies are available under Ubuntu, or you know how to build them.</p>

<h2>But it is still far from CRAN</h2>

<p>OK, it works, but we are still a little bit far from what CRAN does, because Travis CI does not have official support for R. Each time we have to install one Gigabyte of additional software to create the R testing environment (sigh, if only R did not have to tie itself to LaTeX). If these packages are pre-built in the virtual machines, it will save us a lot of time.</p>

<p><del>The second problem is, there is no Windows support on Travis CI</del> (one developer told us on <a href="https://twitter.com/henrikhodne/status/322667858205241344">Twitter</a> that it was coming). There is <a href="http://about.travis-ci.org/docs/user/osx-ci-environment/">a page</a> for OS X, but I did not really figure out how to build software under OS X there.</p>

<p>The third problem is Travis CI only builds and tests packages; it does not provide downloads like CRAN. Perhaps we can upload the packages using <a href="http://about.travis-ci.org/docs/user/encryption-keys/">encryption keys</a> to our own servers.</p>

<h2>R-Forge, where are you going?</h2>

<!--
[R-Forge](http://r-forge.r-project.org/), the most promising "Travis CI" in the R world, is slow and broken from time to time according to my experience. For developers, immediate feedback is precious -- you push some changes to the repository and you want to know immediately if anything is broken. Usually we have to wait for at least one day for the new build on R-Forge. Sometimes the system hangs up for unknown reasons, and the admin has to be notified by users to solve the problem seven days later. There are always requests like "Could you install the foo package for my bar package?" Meanwhile, the development version of R has been disabled for a long time, which is really unfortunate since CRAN insists that packages should be checked against both the current version and the development version of R. What is really funny is that the build and check log links are hidden (by default) behind a button called "Show/Hide extra info". Why don't you want us to see that??
-->


<p>I will shut up here since I realized I was not being constructive. Let me spend more time thinking about this, and I love to hear suggestions from readers as well.</p>

<p>So, two potential Google Summer of Code projects:</p>

<ul>
<li>make R an officially supported language on Travis CI (this really depends on if the Travis team want it or not)</li>
<li>improve R-Forge (of course this depends on if the R-Forge team think they need help or not)</li>
</ul>

]]></content:encoded>
    </item>
    
  </channel>
</rss>
